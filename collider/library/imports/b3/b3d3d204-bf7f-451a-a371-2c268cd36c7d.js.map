{"version":3,"sources":["../../../../assets/Script/assets/Script/moveAction.js"],"names":["Emitter","require","cc","Class","extends","Component","properties","target","Node","mainScene","bullet","Prefab","walkSoundd","AudioClip","shootSound","onLoad","instance","registerEvent","goLeft","bind","goRight","goJump","goShoot","node","getComponent","setAnimation","setEventListener","entry","event","current","audioEngine","play","scaleX","scaleY","x","addAnimation","seq","moveBy","runAction","_jump","sequence","item","instantiate","action","delayTime","callFunc","moveDirection","addChild","y","log","start"],"mappings":"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","file":"moveAction.js","sourceRoot":"../../../../assets/Script","sourcesContent":["const Emitter = require('registerEvent');\n\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n        target: cc.Node,\n        mainScene: cc.Node,\n        bullet: cc.Prefab,\n        walkSoundd: cc.AudioClip,\n        shootSound: cc.AudioClip\n    },\n\n    // LIFE-CYCLE CALLBACKS:\n\n    onLoad() {\n        Emitter.instance = new Emitter();\n        Emitter.instance.registerEvent(\"Go_left\", this.goLeft.bind(this));\n        Emitter.instance.registerEvent(\"Go_right\", this.goRight.bind(this));\n        Emitter.instance.registerEvent(\"JUMP\", this.goJump.bind(this));\n        Emitter.instance.registerEvent(\"SHOOTING\", this.goShoot.bind(this));\n\n        this.node.getComponent(\"sp.Skeleton\").setAnimation(0, \"idle\", true);\n        this.node.getComponent(\"sp.Skeleton\").setEventListener((entry, event) => {\n            this.current = cc.audioEngine.play(this.walkSoundd, false, 1);\n        });\n    },\n    goLeft() {\n\n        this.target.scaleX = -0.1\n        this.target.scaleY = 0.1;\n\n        if (this.target.x <= -442) {\n            this.target.x = 420;\n            this.target.getComponent(\"sp.Skeleton\").setAnimation(0, \"portal\", false);\n            this.target.getComponent(\"sp.Skeleton\").addAnimation(0, \"idle\", true);\n        }\n        else {\n            this.target.getComponent(\"sp.Skeleton\").setAnimation(0, \"run\", false);\n            this.target.getComponent(\"sp.Skeleton\").addAnimation(0, \"idle\", true);\n            var seq = cc.moveBy(0.5, -50, 0);\n            this.target.runAction(seq);\n        }\n    },\n    goRight() {\n        this.target.getComponent(\"sp.Skeleton\").setAnimation(0, \"run\", false);\n        this.target.getComponent(\"sp.Skeleton\").addAnimation(0, \"idle\", true);\n        this.target.scaleX = 0.1\n        this.target.scaleY = 0.1;\n        if (this.target.x >= 440) {\n            this.target.x = -430;\n            this.target.getComponent(\"sp.Skeleton\").setAnimation(0, \"portal\", false);\n            this.target.getComponent(\"sp.Skeleton\").addAnimation(0, \"idle\", true);\n        }\n        else {\n            var seq = cc.moveBy(0.5, 50, 0);\n            this.target.runAction(seq);\n        }\n    },\n    goJump() {\n\n        let _jump = this.target.getComponent(\"sp.Skeleton\");\n        _jump.setAnimation(0, \"jump\", false);\n        _jump.addAnimation(0, \"run\", false);\n        if (this.target.scaleX > 0) {\n            if (this.target.x >= 440) {\n                this.target.x = 440;\n            }\n            else {\n                var seq = cc.sequence(cc.moveBy(0.4, 15, 50), cc.moveBy(0.4, 15, -50));\n                this.target.runAction(seq);\n            }\n\n        } else {\n            if (this.target.x <= -442) {\n                this.target.x = -442;\n            } else {\n                var seq = cc.sequence(cc.moveBy(0.4, -15, 50), cc.moveBy(0.4, -15, -50));\n                this.target.runAction(seq);\n            }\n\n        }\n    },\n    goShoot() {\n        this.current = cc.audioEngine.play(this.shootSound, false, 1);\n        let item = cc.instantiate(this.bullet);\n        this.target.getComponent(\"sp.Skeleton\").setAnimation(0, \"shoot\", false);\n        this.target.getComponent(\"sp.Skeleton\").addAnimation(0, \"idle\", true);\n        let action = cc.sequence(\n            cc.delayTime(0.2),\n            cc.callFunc(() => {\n                let moveDirection\n                this.mainScene.addChild(item);\n\n                if (this.target.scaleX > 0) {\n                    item.x = this.target.x + 35;\n                    item.y = this.target.y + 20;\n                    moveDirection = cc.moveBy(20, 20000, 0)\n                }\n                else {\n                    item.x = this.target.x - 35;\n                    item.y = this.target.y + 20;\n                    moveDirection = cc.moveBy(20, -20000, 0)\n                }\n                item.runAction(moveDirection)\n            }),\n\n\n        );\n\n\n        item.runAction(action);\n        cc.log(this.target.x);\n\n    },\n    start() {\n\n    },\n\n    // update (dt) {},\n});\n"]}