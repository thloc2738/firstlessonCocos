{"version":3,"sources":["playerControl.js"],"names":["cc","Class","extends","Component","properties","isTouch","player","Node","_tagOther","countTime","delayAnim","onLoad","target","getComponent","setAnimation","manager","director","getCollisionManager","enabled","onCollisionEnter","other","self","console","log","tag","jump","shoot","scaleX","addAnimation","onCollisionStay","onCollisionExit","animJump","seq","sequence","moveBy","runAction","update","dt","node","x","action","delayTime","callFunc"],"mappings":"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","file":"playerControl.js","sourceRoot":"../../../../assets/Script","sourcesContent":["\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n        isTouch: false,\n        player: cc.Node,\n        _tagOther: 1,\n        countTime: 0,\n        delayAnim: false,\n    },\n\n    // LIFE-CYCLE CALLBACKS:\n\n    onLoad() {\n        let target = this.player.getComponent(\"sp.Skeleton\");\n        target.setAnimation(0, \"run\", true);\n        let manager = cc.director.getCollisionManager();\n        manager.enabled = true;\n        // manager.enabledDebugDraw = true;\n    },\n    onCollisionEnter: function (other, self) {\n        console.log('on collision enter');\n        if (other.tag == 0 && self.tag == 0) {\n            this.jump();\n        }\n        if (other.tag == 1 && self.tag == 1) {\n            this.delayAnim = true;\n            this.shoot();\n        }\n        if (other.tag == 2 && self.tag == 0) {\n            this.player.scaleX *= -1;\n        }\n\n\n\n\n    },\n    shoot() {\n        let target = this.player.getComponent(\"sp.Skeleton\");\n        target.setAnimation(0, \"shoot\", false);\n        target.addAnimation(0, \"run\", true);\n    },\n    onCollisionStay: function (other, self) {\n        console.log('on collision stay');\n\n    },\n    onCollisionExit: function (other, self) {\n        console.log('on collision exit');\n\n    },\n    jump() {\n        this.animJump();\n        if (this.player.scaleX >= 0) {\n            var seq = cc.sequence(cc.moveBy(0.4, 20, 20), cc.moveBy(0.4, 20, -20))\n        }\n        else {\n            var seq = cc.sequence(cc.moveBy(0.4, -20, 20), cc.moveBy(0.4, -20, -20))\n        }\n        this.player.runAction(seq);\n    },\n    animJump() {\n        let target = this.player.getComponent(\"sp.Skeleton\");\n        target.setAnimation(0, \"jump\", false);\n        target.addAnimation(0, \"run\", true);\n        this.isTouch = false;\n    },\n    update(dt) {\n        if (!this.delayAnim) {\n            if (this.isTouch == false) {\n                if (this.node.scaleX >= 0) {\n                    this.node.x += 70 * dt;\n                }\n                else {\n                    this.node.x -= 70 * dt;\n                }\n            }\n        } else {\n            let action = cc.sequence(cc.delayTime(0.5), cc.callFunc(() => {\n\n                this.delayAnim = false;\n            }));\n            this.player.runAction(action);\n        }\n\n    },\n});\n"]}